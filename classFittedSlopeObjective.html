<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CCT-Harmonics-Optimizer: FittedSlopeObjective Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CCT-Harmonics-Optimizer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classFittedSlopeObjective.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classFittedSlopeObjective-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">FittedSlopeObjective Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines the slope of a component's Bn curve as an optimization objective.  
 <a href="classFittedSlopeObjective.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="fitted__slope__objective_8hh_source.html">fitted_slope_objective.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for FittedSlopeObjective:</div>
<div class="dyncontent">
<div class="center"><img src="classFittedSlopeObjective__inherit__graph.png" border="0" usemap="#aFittedSlopeObjective_inherit__map" alt="Inheritance graph"/></div>
<map name="aFittedSlopeObjective_inherit__map" id="aFittedSlopeObjective_inherit__map">
<area shape="rect" title="Defines the slope of a component&#39;s Bn curve as an optimization objective." alt="" coords="5,80,163,107"/>
<area shape="rect" href="classAbstractObjective.html" title="Abstract class to define objectives for some optimizers." alt="" coords="15,5,153,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for FittedSlopeObjective:</div>
<div class="dyncontent">
<div class="center"><img src="classFittedSlopeObjective__coll__graph.png" border="0" usemap="#aFittedSlopeObjective_coll__map" alt="Collaboration graph"/></div>
<map name="aFittedSlopeObjective_coll__map" id="aFittedSlopeObjective_coll__map">
<area shape="rect" title="Defines the slope of a component&#39;s Bn curve as an optimization objective." alt="" coords="5,80,163,107"/>
<area shape="rect" href="classAbstractObjective.html" title="Abstract class to define objectives for some optimizers." alt="" coords="15,5,153,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9ae2727cf091635bdb0dc4755e29970a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFittedSlopeObjective.html#a9ae2727cf091635bdb0dc4755e29970a">FittedSlopeObjective</a> ()</td></tr>
<tr class="memdesc:a9ae2727cf091635bdb0dc4755e29970a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct an <a class="el" href="classFittedSlopeObjective.html" title="Defines the slope of a component&#39;s Bn curve as an optimization objective.">FittedSlopeObjective</a> object.  <a href="classFittedSlopeObjective.html#a9ae2727cf091635bdb0dc4755e29970a">More...</a><br /></td></tr>
<tr class="separator:a9ae2727cf091635bdb0dc4755e29970a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5d60081a050fb1991debe02bbe9d72b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFittedSlopeObjective.html#af5d60081a050fb1991debe02bbe9d72b">evaluate</a> (CCTools::HarmonicsDataHandler harmonics_handler, int component) override</td></tr>
<tr class="memdesc:af5d60081a050fb1991debe02bbe9d72b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate the objective.  <a href="classFittedSlopeObjective.html#af5d60081a050fb1991debe02bbe9d72b">More...</a><br /></td></tr>
<tr class="separator:af5d60081a050fb1991debe02bbe9d72b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b3688a06121ac979b04f2cc11479327"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFittedSlopeObjective.html#a3b3688a06121ac979b04f2cc11479327">evaluate</a> (CCTools::HarmonicsDataHandler harmonics_handler, int component, double mag_start_pos, double mag_end_pos, bool export_Bn=false)</td></tr>
<tr class="memdesc:a3b3688a06121ac979b04f2cc11479327"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate the objective.  <a href="classFittedSlopeObjective.html#a3b3688a06121ac979b04f2cc11479327">More...</a><br /></td></tr>
<tr class="separator:a3b3688a06121ac979b04f2cc11479327"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae167619a784e7ef164cced00aee209db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFittedSlopeObjective.html#ae167619a784e7ef164cced00aee209db">apply_transformations</a> (std::vector&lt; std::pair&lt; double, double &gt;&gt; &amp;Bn_data, double mag_start_pos, double mag_end_pos)</td></tr>
<tr class="memdesc:ae167619a784e7ef164cced00aee209db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply transformations to the ell &amp; Bn data before fitting a linear function.  <a href="classFittedSlopeObjective.html#ae167619a784e7ef164cced00aee209db">More...</a><br /></td></tr>
<tr class="separator:ae167619a784e7ef164cced00aee209db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e86a15fb6973d385a3dc9b4151de1bb"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFittedSlopeObjective.html#a6e86a15fb6973d385a3dc9b4151de1bb">~FittedSlopeObjective</a> ()</td></tr>
<tr class="separator:a6e86a15fb6973d385a3dc9b4151de1bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classAbstractObjective"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classAbstractObjective')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classAbstractObjective.html">AbstractObjective</a></td></tr>
<tr class="memitem:a35ae1b41f3e2eb5f0b69b3a62754a034 inherit pub_methods_classAbstractObjective"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractObjective.html#a35ae1b41f3e2eb5f0b69b3a62754a034">AbstractObjective</a> ()</td></tr>
<tr class="memdesc:a35ae1b41f3e2eb5f0b69b3a62754a034 inherit pub_methods_classAbstractObjective"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct an <a class="el" href="classAbstractObjective.html" title="Abstract class to define objectives for some optimizers.">AbstractObjective</a> object.  <a href="classAbstractObjective.html#a35ae1b41f3e2eb5f0b69b3a62754a034">More...</a><br /></td></tr>
<tr class="separator:a35ae1b41f3e2eb5f0b69b3a62754a034 inherit pub_methods_classAbstractObjective"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4be7ea1212a1a8fea9696d5cbbd4864 inherit pub_methods_classAbstractObjective"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractObjective.html#aa4be7ea1212a1a8fea9696d5cbbd4864">~AbstractObjective</a> ()</td></tr>
<tr class="separator:aa4be7ea1212a1a8fea9696d5cbbd4864 inherit pub_methods_classAbstractObjective"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4616c71605daf881972e3d8d11e93e96 inherit pub_methods_classAbstractObjective"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractObjective.html#a4616c71605daf881972e3d8d11e93e96">getLabel</a> () const</td></tr>
<tr class="memdesc:a4616c71605daf881972e3d8d11e93e96 inherit pub_methods_classAbstractObjective"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the objective label.  <a href="classAbstractObjective.html#a4616c71605daf881972e3d8d11e93e96">More...</a><br /></td></tr>
<tr class="separator:a4616c71605daf881972e3d8d11e93e96 inherit pub_methods_classAbstractObjective"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classAbstractObjective"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classAbstractObjective')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classAbstractObjective.html">AbstractObjective</a></td></tr>
<tr class="memitem:a7fe85273f95193844976cbd526bbec09 inherit pro_attribs_classAbstractObjective"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractObjective.html#a7fe85273f95193844976cbd526bbec09">label_</a></td></tr>
<tr class="memdesc:a7fe85273f95193844976cbd526bbec09 inherit pro_attribs_classAbstractObjective"><td class="mdescLeft">&#160;</td><td class="mdescRight">Label of the objective.  <a href="classAbstractObjective.html#a7fe85273f95193844976cbd526bbec09">More...</a><br /></td></tr>
<tr class="separator:a7fe85273f95193844976cbd526bbec09 inherit pro_attribs_classAbstractObjective"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines the slope of a component's Bn curve as an optimization objective. </p>
<p>This class serves as an objective for optimizers that support modular objective injection. It defines the objective for a harmonic component as the slope of a fitted linear function to the component's Bn data. The goal is to minimize this slope, favoring a constant Bn function, which indicates minimal variation in the magnetic field component along the magnet's length (ell). The class also allows specifying magnet ell bounds, restricting the slope calculation to the ell range where the magnet physically is. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9ae2727cf091635bdb0dc4755e29970a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ae2727cf091635bdb0dc4755e29970a">&#9670;&nbsp;</a></span>FittedSlopeObjective()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FittedSlopeObjective::FittedSlopeObjective </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct an <a class="el" href="classFittedSlopeObjective.html" title="Defines the slope of a component&#39;s Bn curve as an optimization objective.">FittedSlopeObjective</a> object. </p>

</div>
</div>
<a id="a6e86a15fb6973d385a3dc9b4151de1bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e86a15fb6973d385a3dc9b4151de1bb">&#9670;&nbsp;</a></span>~FittedSlopeObjective()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual FittedSlopeObjective::~FittedSlopeObjective </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae167619a784e7ef164cced00aee209db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae167619a784e7ef164cced00aee209db">&#9670;&nbsp;</a></span>apply_transformations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FittedSlopeObjective::apply_transformations </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::pair&lt; double, double &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>Bn_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mag_start_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mag_end_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Apply transformations to the ell &amp; Bn data before fitting a linear function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Bn_data</td><td>Vector of pairs of ell and Bn values. </td></tr>
    <tr><td class="paramname">mag_start_pos</td><td>Starting position of the magnet relative to the harmonic calculation's axis (ell). </td></tr>
    <tr><td class="paramname">mag_end_pos</td><td>Ending position of the magnet relative to the harmonic calculation's axis (ell).</td></tr>
  </table>
  </dd>
</dl>
<p>This function applies transformations to the ell &amp; Bn data before fitting a linear function. It removes all the pairs where the ell value is not inside the set bounds. It scales the ell values so that the first one is -0.5 and last one 0.5. </p>

</div>
</div>
<a id="af5d60081a050fb1991debe02bbe9d72b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5d60081a050fb1991debe02bbe9d72b">&#9670;&nbsp;</a></span>evaluate() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double FittedSlopeObjective::evaluate </td>
          <td>(</td>
          <td class="paramtype">CCTools::HarmonicsDataHandler&#160;</td>
          <td class="paramname"><em>harmonics_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>component</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Evaluate the objective. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">harmonics_handler</td><td>Result of the harmonics calculation </td></tr>
    <tr><td class="paramname">component</td><td>Harmonics component to be evaluated. 1-indexed</td></tr>
  </table>
  </dd>
</dl>
<p>This function evaluates the objective for a specific harmonics component based on the results of a harmonics calculation. </p>

<p>Implements <a class="el" href="classAbstractObjective.html#a85992b511bf743160061cba0a4cd0d8f">AbstractObjective</a>.</p>

</div>
</div>
<a id="a3b3688a06121ac979b04f2cc11479327"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b3688a06121ac979b04f2cc11479327">&#9670;&nbsp;</a></span>evaluate() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double FittedSlopeObjective::evaluate </td>
          <td>(</td>
          <td class="paramtype">CCTools::HarmonicsDataHandler&#160;</td>
          <td class="paramname"><em>harmonics_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mag_start_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mag_end_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>export_Bn</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Evaluate the objective. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">harmonics_handler</td><td>Result of the harmonics calculation </td></tr>
    <tr><td class="paramname">component</td><td>Harmonics component to be evaluated. 1-indexed </td></tr>
    <tr><td class="paramname">mag_start_pos</td><td>Starting position of the magnet relative to the harmonic calculation's axis (ell). </td></tr>
    <tr><td class="paramname">mag_end_pos</td><td>Ending position of the magnet relative to the harmonic calculation's axis (ell). </td></tr>
    <tr><td class="paramname">export_Bn</td><td>Flag to export the Bn data to a CSV file for debugging purposes.</td></tr>
  </table>
  </dd>
</dl>
<p>This function evaluates the objective for a specific harmonics component based on the results of a harmonics calculation. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/runner/work/CCT-Harmonics-Optimizer/CCT-Harmonics-Optimizer/include/<a class="el" href="fitted__slope__objective_8hh_source.html">fitted_slope_objective.hh</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classFittedSlopeObjective.html">FittedSlopeObjective</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
